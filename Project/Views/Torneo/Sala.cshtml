@model IPC2_P1.Models.Campeonato
@{
    ViewBag.Title = "Sala";
    Layout = "~/Views/Shared/_Layout_no_nav.cshtml";

    string[] top = new string[16], left = new string[16];
    if (Model.Ronda_actual.Numero_equipos == 2)
    {
        System.Diagnostics.Debug.WriteLine("PRUEBA: 2");
        top = new string[]
    {
"227px",
"227px"
    };

        left = new string[]
        {
"358px",
"368px"
        };
    }
    else if (Model.Ronda_actual.Numero_equipos == 4)
    {
        top = new string[]
        {
"125px",
"280px",
"125px",
"280px"
        };

        left = new string[]
        {
"285px",
"100px",
"265px",
"80px"
        };
    }
    else if (Model.Ronda_actual.Numero_equipos == 8)
    {
        top = new string[]
        {
"123px",
"173px",
"257px",
"305px",
"123px",
"147px",
"232px",
"281px"
        };

        left = new string[]
        {
"190px",
"5px",
"-180px",
"-364px",
"-35px",
"302px",
"517px",
"332px"
        };
    }
    else if (Model.Ronda_actual.Numero_equipos == 16)
    {
        top = new string[]
        {
"89px",
"118px",
"160px",
"192px",
"236px",
"245px",
"284px",
"315px",
"63px",
"95px",
"111px",
"143px",
"188px",
"220px",
"261px",
"269px"
        };

        left = new string[]
        {
"98px",
"-86px",
"-270px",
"-453px",
"-637px",
"98px",
"-86px",
"-270px",
"265px",
"81px",
"818px",
"635px",
"451px",
"267px",
"83px",
"820px"
        };
    }
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="“X-UA-Compatible”" content="'IE' ='edge'" />
</head>

<body>
    <section id="Gain">


        @if (Model.Ronda_actual.Numero_equipos == 2)
        {
            <div class="torneo" style="background: url('../wwwroot/images/campeonato_2.png')">
                @for (int i = 0; i < Model.Ronda_actual.Numero_equipos; i++)
                {
                <span class="equipo" style="top: @top[i]; left: @left[i]">@Model.Ronda_actual.Equipos[i].Nombre_equipo</span>
                }
            </div>
        }
        else if (Model.Ronda_actual.Numero_equipos == 4)
        {
            <div class="torneo" style="background: url('../wwwroot/images/campeonato_4.png')">
                @for (int i = 0; i < Model.Ronda_actual.Numero_equipos; i++)
                {
                    <span class="equipo" style="top: @top[i]; left: @left[i]">@Model.Ronda_actual.Equipos[i].Nombre_equipo</span>
                }
            </div>
        }
        else if (Model.Ronda_actual.Numero_equipos == 8)
        {
            <div class="torneo" style="background: url('../wwwroot/images/campeonato_8.png')">
                @for (int i = 0; i < Model.Ronda_actual.Numero_equipos; i++)
                {
                    <span class="equipo" style="top: @top[i]; left: @left[i]">@Model.Ronda_actual.Equipos[i].Nombre_equipo</span>
                }
            </div>
        }
        else if (Model.Ronda_actual.Numero_equipos == 16)
        {
            <div class="torneo" style="background: url('../wwwroot/images/campeonato_16.png')">
                @for (int i = 0; i < Model.Ronda_actual.Numero_equipos; i++)
                {
                    <span class="equipo" style="top: @top[i]; left: @left[i]">@Model.Ronda_actual.Equipos[i].Nombre_equipo</span>
                }
            </div>
        }


        @using (Html.BeginForm("Sala", "Torneo", FormMethod.Post))
        {
            <div style="display:none">
                <input type="text" name="Nombre_campeonato" value="@Model.Nombre_campeonato" />
                <input type="number" name="Numero_equipos" value="@Model.Numero_equipos" />
                <input type="number" name="Numero_rondas" value="@Model.Numero_rondas" />

                @for (int i = 0; i < Model.Numero_equipos; i++)
                {
                    <input type="text" name="Equipos[@i].Nombre_equipo" value="@Model.Equipos[i].Nombre_equipo" />
                    <input type="text" name="Equipos[@i].j1" value="@Model.Equipos[i].j1" />
                    <input type="text" name="Equipos[@i].j2" value="@Model.Equipos[i].j2" />
                    <input type="text" name="Equipos[@i].j3" value="@Model.Equipos[i].j3" />
                }

                @for (int i = 0; i < Model.Rondas.Count; i++)
                {
                    <input type="number" name="Rondas[@i].Numero_ronda" value="@Model.Rondas[i].Numero_ronda" />
                    <input type="number" name="Rondas[@i].Numero_equipos" value="@Model.Rondas[i].Numero_equipos" />

                    for (int j = 0; j < Model.Rondas[i].Numero_equipos; j++)
                    {
                        <input type="text" name="Rondas[@i].Equipos[@j].Nombre_equipo" value="@Model.Rondas[i].Equipos[j].Nombre_equipo" />
                        <input type="text" name="Rondas[@i].Equipos[@j].j1" value="@Model.Rondas[i].Equipos[j].j1" />
                        <input type="text" name="Rondas[@i].Equipos[@j].j2" value="@Model.Rondas[i].Equipos[j].j2" />
                        <input type="text" name="Rondas[@i].Equipos[@j].j3" value="@Model.Rondas[i].Equipos[j].j3" />
                    }

                    <input type="text" name="Rondas[@i].Equipo1.Nombre_equipo" value="@Model.Rondas[i].Equipo1.Nombre_equipo" />
                    <input type="text" name="Rondas[@i].Equipo1.j1" value="@Model.Rondas[i].Equipo1.j1" />
                    <input type="text" name="Rondas[@i].Equipo1.j2" value="@Model.Rondas[i].Equipo1.j2" />
                    <input type="text" name="Rondas[@i].Equipo1.j3" value="@Model.Rondas[i].Equipo1.j3" />

                    <input type="text" name="Rondas[@i].Equipo2.Nombre_equipo" value="@Model.Rondas[i].Equipo2.Nombre_equipo" />
                    <input type="text" name="Rondas[@i].Equipo2.j1" value="@Model.Rondas[i].Equipo2.j1" />
                    <input type="text" name="Rondas[@i].Equipo2.j2" value="@Model.Rondas[i].Equipo2.j2" />
                    <input type="text" name="Rondas[@i].Equipo2.j3" value="@Model.Rondas[i].Equipo2.j3" />

                    for (int j = 0; j < Model.Rondas[i].Partidas.Count; j++)
                    {
                        <input type="text" name="Rondas[@i].Partidas[@j].Jugador1" value="@Model.Rondas[i].Partidas[j].Jugador1" />
                        <input type="text" name="Rondas[@i].Partidas[@j].Jugador2" value="@Model.Rondas[i].Partidas[j].Jugador2" />
                        <input type="text" name="Rondas[@i].Partidas[@j].Ganador" value="@Model.Rondas[i].Partidas[j].Ganador" />
                    }

                    <input type="text" name="Rondas[@i].Partida_siguiente.Jugador1" value="@Model.Rondas[i].Partida_siguiente.Jugador1" />
                    <input type="text" name="Rondas[@i].Partida_siguiente.Jugador2" value="@Model.Rondas[i].Partida_siguiente.Jugador2" />
                    <input type="text" name="Rondas[@i].Partida_siguiente.Ganador" value="@Model.Rondas[i].Partida_siguiente.Ganador" />
                }

                <input type="number" name="Ronda_actual.Numero_ronda" value="@Model.Ronda_actual.Numero_ronda" />
                <input type="number" name="Ronda_actual.Numero_equipos" value="@Model.Ronda_actual.Numero_equipos" />

                @for (int j = 0; j < Model.Ronda_actual.Numero_equipos; j++)
                {
                <input type="text" name="Ronda_actual.Equipos[@j].Nombre_equipo" value="@Model.Ronda_actual.Equipos[j].Nombre_equipo" />
                <input type="text" name="Ronda_actual.Equipos[@j].j1" value="@Model.Ronda_actual.Equipos[j].j1" />
                <input type="text" name="Ronda_actual.Equipos[@j].j2" value="@Model.Ronda_actual.Equipos[j].j2" />
                <input type="text" name="Ronda_actual.Equipos[@j].j3" value="@Model.Ronda_actual.Equipos[j].j3" />
                }

                <input type="text" name="Ronda_actual.Equipo1.Nombre_equipo" value="@Model.Ronda_actual.Equipo1.Nombre_equipo" />
                <input type="text" name="Ronda_actual.Equipo1.j1" value="@Model.Ronda_actual.Equipo1.j1" />
                <input type="text" name="Ronda_actual.Equipo1.j2" value="@Model.Ronda_actual.Equipo1.j2" />
                <input type="text" name="Ronda_actual.Equipo1.j3" value="@Model.Ronda_actual.Equipo1.j3" />

                <input type="text" name="Ronda_actual.Equipo2.Nombre_equipo" value="@Model.Ronda_actual.Equipo2.Nombre_equipo" />
                <input type="text" name="Ronda_actual.Equipo2.j1" value="@Model.Ronda_actual.Equipo2.j1" />
                <input type="text" name="Ronda_actual.Equipo2.j2" value="@Model.Ronda_actual.Equipo2.j2" />
                <input type="text" name="Ronda_actual.Equipo2.j3" value="@Model.Ronda_actual.Equipo2.j3" />

                @for (int j = 0; j < Model.Ronda_actual.Partidas.Count; j++)
                {
                <input type="text" name="Ronda_actual.Partidas[@j].Jugador1" value="@Model.Ronda_actual.Partidas[j].Jugador1" />
                <input type="text" name="Ronda_actual.Partidas[@j].Jugador2" value="@Model.Ronda_actual.Partidas[j].Jugador2" />
                <input type="text" name="Ronda_actual.Partidas[@j].Ganador" value="@Model.Ronda_actual.Partidas[j].Ganador" />
                }

                <input type="text" name="Ronda_actual.Partida_siguiente.Jugador1" value="@Model.Ronda_actual.Partida_siguiente.Jugador1" />
                <input type="text" name="Ronda_actual.Partida_siguiente.Jugador2" value="@Model.Ronda_actual.Partida_siguiente.Jugador2" />
                <input type="text" name="Ronda_actual.Partida_siguiente.Ganador" value="@Model.Ronda_actual.Partida_siguiente.Ganador" />

            </div>

            <div class="container">
                <div class="title text-center">
                    <div style="background-color:rgba(0, 0, 0, 0.75); color:white; border-radius:15px">
                        <hr />
                        <p>Ronda @Model.Ronda_actual.Numero_ronda: @Model.Ronda_actual.Equipo1.Nombre_equipo VS @Model.Ronda_actual.Equipo2.Nombre_equipo</p>
                        <p>Siguiente partida: @Model.Ronda_actual.Partida_siguiente.Jugador1 VS @Model.Ronda_actual.Partida_siguiente.Jugador2</p>
                        <hr />
                        <input type="submit" value="Iniciar partida" />
                        <hr />
                        <input type="submit" value="Gana @Model.Ronda_actual.Partida_siguiente.Jugador1" />
                        <input type="submit" value="Gana @Model.Ronda_actual.Partida_siguiente.Jugador2" />
                        <hr />
                    </div>
                </div>
            </div>
        }

        <div class="container">
            <div class="title text-center">
                <div style="background-color:rgba(0, 0, 0, 0.75); color:white; border-radius:15px">
                    <hr />
                    <p>Equipo @(Model.Equipos.FindIndex(x => x == Model.Ronda_actual.Equipo1) + 1): @Model.Ronda_actual.Equipo1.Nombre_equipo</p>
                    <p>Integrantes:</p>
                    <p>@Model.Ronda_actual.Equipo1.j1<br />@Model.Ronda_actual.Equipo1.j2<br />@Model.Ronda_actual.Equipo1.j3</p>
                    <hr />
                </div>
            </div>
        </div>

        <div class="container">
            <div class="title text-center">
                <div style="background-color:rgba(0, 0, 0, 0.75); color:white; border-radius:15px">
                    <hr />
                    <p>Equipo @(Model.Equipos.FindIndex(x => x == Model.Ronda_actual.Equipo2) + 1): @Model.Ronda_actual.Equipo2.Nombre_equipo</p>
                    <p>Integrantes:</p>
                    <p>@Model.Ronda_actual.Equipo2.j1<br />@Model.Ronda_actual.Equipo2.j2<br />@Model.Ronda_actual.Equipo2.j3</p>
                    <hr />
                </div>
            </div>
        </div>

    </section>
</body>
</html>